<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>WordBook</title>
  </head>
  <body>
    <table border="1" id="wordlist">
      <tr>
        <th>正</th>
        <th>番号</th>
        <th>単語</th>
        <th>日本語</th>
      </tr>
    </table>
    <script>
      window.addEventListener("error", (event) => {
        alert(event.message);
      });
      
      const table_id = document.getElementById('wordlist');
      
      
      let words_num = 0;
      let words = [];

      function table_create(){
        for(let k of words){
          var tr_k = table_id.insertRow(-1);
          var td0_k = tr_k.insertCell(0);
          td0_k.textContent = "0"
          var td1_k = tr_k.insertCell(1);
          td1_k.textContent = k[0];
          let td2_k = tr_k.insertCell(2);
          td2_k.textContent = k[1];
          let td3_k = tr_k.insertCell(3);
          td3_k.textContent = k[2];
        }
      }

      //alert('hey');
      const filePath = "/Static/EnglishWords/words_data.txt";
      // 非同期でファイルを読み込む
      fetch(filePath)
        .then(response => response.text())
        .then(data => {
          //alert('get');
          //english = data;
          words = data.split('\n').map((k) => {
            let k_k = k.split(/(:|\/)/);
            return [k_k[0],k_k[2],k_k.slice(4)];
          });
          
          words_num = words.length;

          table_create();
    
        })
        .catch(error => {
          console.error('Error:', error);
        });



      let name = localStorage.getItem('name');
      let id = localStorage.getItem('id');
      let room = localStorage.getItem('room');
    </script>
  </body>
</html>
