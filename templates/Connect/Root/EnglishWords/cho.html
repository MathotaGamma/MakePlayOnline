<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>MPGinW/英単語</title>
    <style>
      *{
        margin: 0px;
      }
      input {
        width: 50px;
      }

    </style>
  </head>
  <body>
    <div id="menu_par">
      <input type="number" class="menu" min="1" max="1900" value="1">~<input type="number" min="1" max="190" value="1900"><br>
      <input type="radio" class="menu" name="mode" value="normal" checked>通常
      <input type="radio" class="menu" name="mode" value="weak">苦手特訓モード<br>
      <input type="button" class="menu" value="開始" onclick="start_click();">
    </div>
    <div id="answer_box">
      <div id="box_1"></div>
      <div id="box_2"></div>
      <div id="box_3"></div>
      <div id="box_4"></div>
    </div>
    
    <script>
      const filePath = "/Static/EnglishWords/words_data.txt";
      let len = 0;
      let Words = [];
      let words = [];

      let state = "menu";

      const menu_id = document.getElementById('menu_par');

      const menu_items = document.getElementsByClassName('menu');



      let until_num = localStorage.getItem('English_Words');
      if (until_num == null) {
        until_num = new Array(1900).fill("0");
        localStorage.setItem('English_Words', until_num.join(','));
      } else {
        until_num = until_num.split(',');
      }

      function menu(){
        if(state == "menu"){
          menu_id.style.display = 'none';
        }
      }

      function start_click(){
        let k_elements = document.getElementsByName('mode');
        let mode = '';
        for (let i = 0; i < k_elements.length; i++){
          if (k_elements.item(i).checked){
            mode = k_elements.item(i).value;
            break;
          }
        }
        if(mode == "normal" || mode == "weak"){
          mode = "play";
        } else {
          mode = "menu";
        }

        if(mode == "play"){
          for(let k = 0; k < menu_items.length; k++){
            menu_items[k].style.display = 'none';
          }
        } else {
          for(let k = 0; k < menu_items.length; k++){
            menu_items[k].style.display = 'block';
          }
        }
      
        
      }
      
      fetch(filePath)
        .then(response => response.text())
        .then(data => {
        //alert('get');
            
          Words = data.split('\n').map((k) => {
            let k_k = k.split(/(:|\/)/);
            return [k_k[0],k_k[2],k_k.slice(4)];
          });
          words = Words.slice(0,Words.length);
          //words = Words.slice(parseInt(params[0])-1,parseInt(params[1]));
          
          //alert(words);
          len = words.length;
          alert(words.join(','));
        })
    </script>
  </body>
</html>
